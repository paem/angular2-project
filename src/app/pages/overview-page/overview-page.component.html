<title>Equilab | Overview</title>

<div class="container">
  <div class="wrapper">

    <div id="page-wrapper" [@slideToLeft]="'true'">
      <div>
        <md-card>
          <md-tab-group>
            <md-tab>


              <template class="tabColor" md-tab-label>
                Months
              </template>
              <select #select [(ngModel)]="current" [ngClass]="{setColor: current}"
                      (change)="selectedFromList($event.target.selectedIndex)">
                <option *ngFor="let item of list" [ngClass]="{unSetColor: item}" [value]="item.id">{{item.name}}
                </option>
              </select>
              <p>{{weekday | date:"ww"}}</p>
              <hr style="border-color: lightgrey; width:100%;">
              <p *ngFor='let v of _values2'>{{ v }} </p>
            </md-tab>
            <md-tab>
              <template md-tab-label>
                Weeks
              </template>
              <select #select [(ngModel)]="current" [ngClass]="{setColor: current}"
                      (change)="selectedFromList($event.target.selectedIndex)">
                <option *ngFor="let item of list" [ngClass]="{unSetColor: item}" [value]="item.id">{{item.name}}
                </option>
              </select>
              <p *ngFor='let v of _values2'>{{ v }} </p>
              <table class="table-responsive" style="width:100%;">
                <tr>
                  {{test}}
                  <th style="" class="rowsPadding">Horses</th>
                  <th class="rowsPadding">W-3</th>
                  <th class="rowsPadding">W-4</th>
                  <th class="rowsPadding">W-5</th>
                  <th class="rowsPadding">W-6</th>
                  <th class="rowsPadding">W-7</th>
                  <th class="rowsPadding">W-8</th>
                  <th class="rowsPadding">
                    <div class="week-number">
                      W-{{weekOfYear | week}}
                    </div>
                  </th>
                </tr>
                <tr>
                  <td style="display: flex;" class="rowsPadding" *ngFor="let horse of horses | async">

                    {{horse.$key}}


                    <button (click)="getTrainings(horse.data)">Click me</button>


                  </td>

                  <td style="display: flex" class="rowsPadding" *ngFor="let trainings of horses | async">

                    <ul>
                      <li *ngFor="let r of horses | async">
                        {{ (r.trainings | async)?.ground }}
                        <ul>

                        </ul>
                      </li>
                    </ul>

                  </td>


                </tr>
              </table>
              <hr style="border-color: lightgrey; width:100%;">
            </md-tab>
            <md-tab>

              <template md-tab-label>
                Days
              </template>
              <select #select [(ngModel)]="current" [ngClass]="{setColor: current}"
                      (change)="selectedFromList($event.target.selectedIndex)">
                <option *ngFor="let item of list" [ngClass]="{unSetColor: item}" [value]="item.id">{{item.name}}
                </option>
              </select>
              <p *ngFor='let v of _values2'>{{ v }} </p>
              <table class="table-responsive" style="width: 100%;">

                <!--
                    <tr>
                      <th style="" class="rowsPadding">Horses</th>
                      <th class="rowsPadding">Data</th>
                    </tr>

                    <tr *ngFor="let horse of horses | async">


                      <td style="border: 2px solid red">
                        {{(horse.data| async)?.name}}
                        <br>
                        <button (click)="getTrainings(horse.data)">Click me</button>
                      </td>



                      <td *ngFor="let training of currentHorseTrainings; let i = index">
                        Date: {{training.date}}
                        Beat: {{training.canter.beat}}
                      </td>
                    </tr>

              -->

                <tr>
                  <th style="" class="rowsPadding">Horses</th>
                  <th class="rowsPadding">Data</th>
                </tr>


                <tr *ngFor="let horse of myPonnys; let i = index">
                  <h3>{{horse?.name}}</h3>
                  <hr>


                  <div *ngFor="let training of currentHorseTrainings; let trainingIndex = index" style="border: 2px solid black; margin: 40px 0">
                    <p>Datum: {{training?.date}}</p><br>
                    <p>Counter Time: {{training?.canter.time}}</p><br>
                    <p>Walk Time: {{training?.walk.time}}</p><br>
                    <p>Trot Time: {{training?.trot.time}}</p><br>

                    <div *ngIf="!isLoading" class="block">
                      <h1>{{i}}</h1>
                      <canvas baseChart
                              [datasets]="barChartData[trainingIndex] ? barChartData[trainingIndex] : [] "
                              [labels]="barChartLabels"
                              [options]="barChartOptions"
                              [colors]="barChartColors"
                              [legend]="barChartLegend"
                              [chartType]="barChartType">

                      </canvas>
                    </div>

                  </div>

                </tr>
              </table>
              <hr style="border-color: lightgrey; width:100%;">
            </md-tab>
          </md-tab-group>
        </md-card>
      </div>
    </div>
  </div>
</div>
